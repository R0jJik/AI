Ğ”Ğ¾Ğ±Ğ°Ğ»ĞµĞ½Ñ‹ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹:
dela=["Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾, ÑĞ¿Ğ°ÑĞ¸Ğ±Ğ¾! Ğ Ñƒ Ñ‚ĞµĞ±Ñ? ",
    "ĞĞ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾, Ğ¿Ğ¾ĞºĞ° Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼ÑÑ ğŸ˜Š ",
    "Ğ’ÑÑ‘ Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾! ĞšĞ°Ğº ÑĞ°Ğ¼? ",
    "ĞšĞ°Ğº Ğ² ÑĞºĞ°Ğ·ĞºĞµ â€” Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ´ĞµĞ», Ğ½Ğ¾ Ñ Ğ½Ğ° ĞºĞ¾Ğ½Ğµ! ",
    "ĞŸĞ¾ĞºĞ° Ğ½Ğµ Ğ¶Ğ°Ğ»ÑƒÑÑÑŒ! ",
    "Ğ’ÑÑ‘ Ğ¿Ñ€ĞµĞºÑ€Ğ°ÑĞ½Ğ¾, Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ ĞºĞ¾Ğ³Ğ´Ğ° Ñ‚ĞµĞ±Ñ Ğ²Ğ¸Ğ¶Ñƒ! ",
    "Ğ¢ĞµÑ€Ğ¿Ğ¸Ğ¼Ğ¾. Ğ ĞºĞ°Ğº Ñ‚Ñ‹? ",
    "ĞšĞ°Ğº Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾: Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°, Ğ´Ğ¾Ğ¼, ÑĞ¿Ğ¾Ñ€Ñ‚. Ğ Ñƒ Ñ‚ĞµĞ±Ñ Ñ‡Ñ‚Ğ¾ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾? ",
    "ĞŸĞ¾ĞºĞ° Ğ²ÑÑ‘ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾, Ğ½Ğ°Ğ´ĞµÑÑÑŒ, Ñ‚Ğ°Ğº Ğ¸ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ÑÑ! "]

Ğ´Ğ¾Ğ±Ğ°Ğ»ĞµĞ½Ğ° Ğ»ĞµĞ¼Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ Ğ¿Ğ¾Ğ¼Ğ¾ÑˆÑŒÑ spacy:
nlp = spacy.load("ru_core_news_sm")
def process_text(text):
    doc=nlp(text)
    tokens=[token.lemma_ for token in doc]
    return tokens

Ğ´Ğ¾Ğ±Ğ°Ğ»ĞµĞ½ 'vjwbjyfkmysq Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ñ‚ĞµĞºÑÑ‚Ğ° Ñ Ğ¿Ğ¾Ğ¼Ğ¾ÑˆÑŒÑ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸ TextBlob:
def analyze_sentiment(text):
    global pol
    texten=Translator().translate(text, dest="en").text
    blop=TextBlob(texten)
    polarity=blop.sentiment.polarity
    if polarity>0.2 and pol<=0:
        pol = 1
        return f"ĞšÑÑ‚Ğ°Ñ‚Ğ¸ Ñ Ğ·Ğ°Ğ¼ĞµÑ‚Ğ¸Ğ», Ñ‡Ñ‚Ğ¾ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ Ñ‚Ñ‹ ÑÑ‡Ğ°ÑÑ‚Ğ»Ğ¸Ğ²Ñ‹Ğ¹!ğŸ˜ğŸ˜† "
    elif polarity<-0.1 and pol>=0:
        pol = -1
        return f"ĞĞµ Ğ³Ñ€ÑƒÑÑ‚Ğ¸! ğŸ‘º "
    elif pol!=0 and -0.1<polarity<0.2:
        pol = 0
        return "Ğ, Ñ‚Ñ‹ ÑƒÑĞ¿Ğ¾ĞºĞ¾Ğ¸Ğ»ÑÑ. ğŸ˜˜ "
    else:
        return ""

Ğ¿ĞµÑ€ĞµĞ¿Ğ¸ÑĞ°Ğ½Ğ° Ğ²ÑÑ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ğ»ĞµĞ¼Ğ¼:
text = text.lower()  # ĞŸÑ€Ğ¸Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ Ğº Ğ½Ğ¸Ğ¶Ğ½ĞµĞ¼Ñƒ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ñƒ Ğ´Ğ»Ñ ÑƒĞ½Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸
    tokens=process_text(text)
    response=""
    if ("Ğ¿Ğ¾Ğ¸ÑĞº" in  tokens) or ((("Ğ½Ğ°Ğ¹Ğ´Ğ¸Ñ‚Ğµ" in  tokens) or ("Ğ½Ğ°Ğ¹Ñ‚Ğ¸" in  tokens) or ("Ğ½Ğ°Ğ¹Ğ´Ğ¸"in  tokens)) and ("Ğ²" in  tokens) and ("Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚" in  tokens)):
        response = response + f"{search_web(text, tokens)}"

    if (("ĞºĞ°Ğº" in  tokens) and ("Ğ´ĞµĞ»Ğ¾"  in  tokens)) or (("ĞºĞ°Ğº" in  tokens) and ("Ğ´ĞµĞ»Ğ¸ÑˆĞºĞ¸"  in  tokens)):
        wt = lambda m: f"{random.choice(dela)}"
        response = response + wt(0)
    elif any(elem in tokens for elem in priv):
        ot = lambda m: f"{random.choice(hello)}"
        response = response + ot(0)

    if (("ĞºĞ°Ğº" in tokens) and ("Ñ‚ĞµĞ±Ñ" in tokens) and ("Ğ·Ğ²Ğ°Ñ‚ÑŒ" in tokens)) or ((("Ñ‚Ğ²Ğ¾Ğ¹" in  tokens) or ("Ñ‚Ğ²Ğ¾Ñ‘" in  tokens)) and "Ğ¸Ğ¼Ñ" in tokens):
        nt=lambda m: this_name()
        response = response + nt(0)
    elif (("Ñ‚ĞµĞ¿ĞµÑ€ÑŒ" in tokens) and ("Ñ‚ĞµĞ±Ñ" in tokens) and ("Ğ·Ğ²Ğ°Ñ‚ÑŒ" in tokens)) or (("Ñ‚ĞµĞ¿ĞµÑ€ÑŒ" in tokens) and ("Ñ‚Ñ‹" in tokens)):
        rt=lambda m: Rename(text, tokens)
        response = response + rt(0)

    if (("Ñ‡Ñ‚Ğ¾" in tokens) and ("Ñ‚Ñ‹" in tokens) and ("ÑƒĞ¼ĞµÑ‚ÑŒ" in tokens)) or (("Ñ‚Ğ²Ğ¾Ğ¹" in tokens) and ("Ğ½Ğ°Ğ²Ñ‹Ğº" in tokens)):
        ct = lambda m: f"{random.choice(skills)}"
        response = response + f"Ğ¯ ÑƒĞ¼ĞµÑ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°Ñ‚ÑŒ Ğ½Ğ° Ğ¿Ñ€Ğ¾ÑÑ‚Ñ‹Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ (Ğ²Ñ€ĞµĞ¼Ñ, Ğ´Ğ°Ñ‚Ğ°, Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğ°, Ğ±Ğ°Ğ·Ğ°Ğ²Ğ°Ñ Ğ°Ñ€Ğ¸Ñ„Ğ¼ĞµÑ‚Ğ¸ĞºĞ°).\nĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ ÑĞ¿Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ: {ct(0)}"

    if (("ÑĞºĞ¾Ğ»ÑŒĞºĞ¾" in tokens) and (("Ğ²Ñ€ĞµĞ¼Ñ" in tokens) or ("Ğ²Ñ€ĞµĞ¼ÑĞ½Ğ¸" in tokens))) or (("ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹" in tokens) and ("Ñ‡Ğ°Ñ" in tokens)):
        tt = lambda m: data_print()
        response = response + tt(0)
    elif (("Ğ´Ğ°Ñ‚Ğ°" in tokens) or (("ĞºĞ°ĞºĞ¾Ğ¹" in tokens) and ("ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ" in tokens) and ("Ğ´ĞµĞ½ÑŒ" in tokens))):
        dt=lambda m: f"{datetime.date.today()}"
        response = response + f"Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ {dt(0)}"

    if (("Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğ°" in tokens) and ("Ğ²" in tokens)):
        kt=lambda m: f"{weather_print(text)}"
        response = response + kt(0)
    noarithmetic=r"[*/](\d+)\s*([+*/\-])\s*(\d+)"
    arithmetic = "(\d+)\s*([+*/\-])\s*(\d+)"

    if re.search(noarithmetic,text):
        response=response + "ĞÑ€Ğ¸Ñ„Ğ¼ĞµÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ½Ğµ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°Ñ‚ÑŒÑÑ Ñ * Ğ¸Ğ»Ğ¸ / "
    elif re.search(arithmetic,text):
        ct = lambda m: f"{random.choice(calt)} {calculation(text)}"
        response = response + ct(0)

    response=response + f"{analyze_sentiment(text)}"
    log_dialog(text, response)
    return response
